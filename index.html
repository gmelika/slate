<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="icon" href="images/favicon.ico">
    <title>Partner API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #f8f8f2;
  background-color: #272822;
}
.highlight .err {
  color: #151515;
  background-color: #ac4142;
}
.highlight .c, .highlight .cd, .highlight .cm, .highlight .c1, .highlight .cs {
  color: #505050;
}
.highlight .cp {
  color: #f4bf75;
}
.highlight .nt {
  color: #f4bf75;
}
.highlight .o, .highlight .ow {
  color: #d0d0d0;
}
.highlight .p, .highlight .pi {
  color: #d0d0d0;
}
.highlight .gi {
  color: #90a959;
}
.highlight .gd {
  color: #ac4142;
}
.highlight .gh {
  color: #6a9fb5;
  background-color: #151515;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #aa759f;
}
.highlight .kc {
  color: #d28445;
}
.highlight .kt {
  color: #d28445;
}
.highlight .kd {
  color: #d28445;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #90a959;
}
.highlight .sr {
  color: #75b5aa;
}
.highlight .si {
  color: #8f5536;
}
.highlight .se {
  color: #8f5536;
}
.highlight .nn {
  color: #f4bf75;
}
.highlight .nc {
  color: #f4bf75;
}
.highlight .no {
  color: #f4bf75;
}
.highlight .na {
  color: #6a9fb5;
}
.highlight .m, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mb, .highlight .mx {
  color: #90a959;
}
.highlight .ss {
  color: #90a959;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='www.sfox.com/partners'>Sign Up for a Partner Account</a></li>
            <li><a href='mailto:support@sfox.com'>Need help? Email us</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="introduction">Introduction</h1>

<p>Welcome to the SFOX API! The API allows you to offer buy/sell services to your customers through the SFOX platform.  In this structure, our partners
act as an intermediary between SFOX and their customers.</p>

<blockquote>
<p>To create an account, use this code:</p>
</blockquote>
<pre class="highlight shell"><code><span class="c"># With shell, you can just pass the correct header with each request</span>
curl <span class="s2">"https://api.sfox.com/v2/partner/&lt;partner name&gt;/&lt;path&gt;"</span> <span class="se">\</span>
  -H <span class="s2">"X-SFOX-PARTNER-ID: &lt;partner id&gt;"</span>
</code></pre>

<p>SFOX uses partner IDs only for tracking purposes.</p>

<aside class="notice">
You must replace &ldquo;partner id&rdquo; with your partner id provided by sfox.
</aside>

<h1 id="creating-a-customer-account">Creating a Customer Account</h1>

<p>The typical process to create a customer account on SFOX is as follows:</p>

<ol>
<li>Partner <a href="#signup">creates an account</a> for the Customer</li>
<li>SFOX returns an <code class="prettyprint">account token</code> which is used on any further api call to identify the target account</li>
<li>Partner collects KYC information and <a href="#verify-account">sends it to SFOX</a></li>
<li>If required, the <a href="#upload-required-verification-documents">Partner uploads</a> any customer documents as requested by SFOX</li>
<li>Customer <a href="#add-payment-method">adds a payment method</a> to the account</li>
<li>Once the customer and the payment method are verified then the customer is allowed to buy/sell crypto currencies through SFOX</li>
</ol>

<h2 id="signup">Signup</h2>

<p>This api is the first step with any new user interaction with the system.
It create an account on SFOX for the customer.  Once the call is successful the Partner will receive an <code class="prettyprint">account token</code> which it can
use for further actions on the account on behalf of the customer.  <a href="#account-fields">Read more</a> about the fields returned by this api.</p>

<h3 id="request-parameters">Request Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>email</td>
<td>the email used by the customer</td>
</tr>
<tr>
<td>username</td>
<td>this must be the same as the user&rsquo;s email</td>
</tr>
<tr>
<td>password</td>
<td>this is used to allow the user to recover account information</td>
</tr>
</tbody></table>

<h3 id="account-fields">Account Fields</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>token</td>
<td>this is the account token to be used in all further communications.  There is no way for the partner to retrieve this token at a future time.  Partner is responsible for securily storing this token.</td>
</tr>
<tr>
<td><strong>verification_status</strong></td>
<td></td>
</tr>
<tr>
<td><ul><li>level</li><li>required_docs</li></ul></td>
<td><ul><li>see <a href="#verification-levels">verification levels</a> for further information</li><li>see <a href="#required-docs">required docs</a> for more info</li></ul></td>
</tr>
<tr>
<td>can_buy</td>
<td>whether the user is permitted to buy from SFOX</td>
</tr>
<tr>
<td>can_sell</td>
<td>whether the user is permitted to sell to SFOX</td>
</tr>
<tr>
<td>limits</td>
<td>this describes both the user&rsquo;s total limits, and their available limits (after taking into account what they&rsquo;ve used up already)</td>
</tr>
</tbody></table>

<blockquote>
<p>To create an account, use this code:</p>
</blockquote>
<pre class="highlight shell"><code><span class="c"># With shell, you can just pass the correct header with each request</span>
curl <span class="s2">"https://api.sfox.com/v2/partner/&lt;partner name&gt;/account"</span> <span class="se">\</span>
  -H <span class="s2">"X-SFOX-PARTNER-ID: &lt;partner id&gt;"</span> <span class="se">\</span>
  -H <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  -d <span class="s1">'{
    "username":"user@domain.com",
    "email":"user@domain.com",
    "password":"password123"
  }'</span>
</code></pre>

<blockquote>
<p>The result of the call will be in the following format:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;account token&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"account"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user123"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"verification_status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"level"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unverified"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"can_buy"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nt">"can_sell"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nt">"limits"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"usd"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"available"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"buy"</span><span class="p">:</span><span class="w"> </span><span class="mi">5000</span><span class="p">,</span><span class="w">
          </span><span class="nt">"sell"</span><span class="p">:</span><span class="w"> </span><span class="mi">5000</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nt">"total"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"buy"</span><span class="p">:</span><span class="w"> </span><span class="mi">5000</span><span class="p">,</span><span class="w">
          </span><span class="nt">"sell"</span><span class="p">:</span><span class="w"> </span><span class="mi">5000</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h2 id="verify-account">Verify Account</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://api.sfox.com/v2/partner/&lt;partner name&gt;/account/&lt;account id&gt;/verify"</span> <span class="se">\</span>
  -H <span class="s2">"X-SFOX-PARTNER-ID: &lt;partner id&gt;"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer &lt;account token&gt;"</span> <span class="se">\</span>
  -H <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  -d <span class="s1">'{
  "firstname": "name1",
  "middlename": "t",
  "lastname": "name2",
  "street1": "street1",
  "street2": "street2",
  "city": "city",
  "state": "state",
  "zipcode": "zip",
  "country": "US",
  "birth_day": 1,
  "birth_month": 1,
  "birth_year": 1990,
  "ssn": 123456789,
  "identity": {
    "type": "driver_license",
    "number": "b1234567",
    "state": "CA",
    "country": "US"
  },
  "phone_number": "+12345678900"
}'</span>

</code></pre>

<blockquote>
<p>The result of the calls is the updated account info:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"account"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;account id&gt;"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"verification_status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"level"</span><span class="p">:</span><span class="w"> </span><span class="s2">"needs_documents"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"required_docs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"address"</span><span class="p">,</span><span class="w"> </span><span class="s2">"ssn"</span><span class="p">]</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nt">"can_buy"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nt">"can_sell"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nt">"limits"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"usd"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nt">"available"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nt">"buy"</span><span class="p">:</span><span class="w"> </span><span class="mi">5000</span><span class="p">,</span><span class="w">
                    </span><span class="nt">"sell"</span><span class="p">:</span><span class="w"> </span><span class="mi">5000</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nt">"total"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nt">"buy"</span><span class="p">:</span><span class="w"> </span><span class="mi">10000</span><span class="p">,</span><span class="w">
                    </span><span class="nt">"sell"</span><span class="p">:</span><span class="w"> </span><span class="mi">10000</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This api allows you to submit personal information on the user for KYC purposes.  Before a user can buy/sell currencies they need to be fully
verified.  This api allows the user to provide Personally Indetifiable Information, which we use to verify their identity.
If the information matches without issues, their verification level will be marked <code class="prettyprint">verified</code>.  This call returns the same <a href="#account-fields">account</a>
data structure as described before.</p>

<h3 id="verification-levels">Verification levels</h3>

<table><thead>
<tr>
<th>Level</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>verified</td>
<td>the user has been verified and no further action is needed</td>
</tr>
<tr>
<td>pending</td>
<td>the user needs further verification by SFOX, however no further action is needed by the user</td>
</tr>
<tr>
<td>needs_documents</td>
<td>SFOX needs further documentation from the user which need to be <a href="#upload-required-verification-documents">uploaded</a> using our api.  The list of documents required will be returned in the <a href="#required-docs">required_docs</a> property.</td>
</tr>
</tbody></table>

<p>If the api, however, returns a list of <a href="#required-docs">required documents</a> then the user has to submit these documents for further consideration.</p>

<h2 id="required-docs">Required Docs</h2>

<table><thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>ssn</td>
<td>a document showing proof of the social security number</td>
</tr>
<tr>
<td>dl</td>
<td>a scan of the person&rsquo;s driver&rsquo;s license</td>
</tr>
<tr>
<td>address</td>
<td>a scan of recent utility bill or bank account statement showing the person&rsquo;s address</td>
</tr>
<tr>
<td>passport</td>
<td>the user needs to provide a scan of the pages that include the person&rsquo;s picture, name and personal information.</td>
</tr>
</tbody></table>

<h2 id="upload-required-verification-documents">Upload Required Verification Documents</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://api.sfox.com/v2/partner/&lt;partner id&gt;/account/&lt;account id&gt;/upload/sign"</span> <span class="se">\</span>
  -H <span class="s2">"X-SFOX-PARTNER-ID: &lt;partner id&gt;"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer &lt;account token&gt;"</span> <span class="se">\</span>
  -H <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  -d <span class="sb">`</span><span class="o">{</span>
    <span class="s2">"type"</span>: <span class="s2">"address"</span>,
    <span class="s2">"filename"</span>: <span class="s2">"utility-bill-201606.jpg"</span>,
    <span class="s2">"mime_type"</span>: <span class="s2">"image/jpg"</span>
  <span class="o">}</span><span class="sb">`</span>
</code></pre>

<blockquote>
<p>The result of the call is the signed_request to upload the file to:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"signed_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://sfox-kyc.s3.amazonaws.com/31-individual-address-utility-bill-201606-ada7189dc4c7.JPG?AWSAccessKeyId=AKIAI4JAQOPLZJH3WRMA&amp;Content-Type=image%2Fjpeg&amp;Expires=1468909986&amp;Signature=aqU5abWqt0fmE5GTjQUGh82%2BpzU%3D&amp;x-amz-acl=private"</span><span class="err">"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>User documents are uploaded directly to S3 from the client browser.  The process is as follows:  </p>

<ol>
<li>client requests a signed url from SFOX</li>
<li>client uploads file to the url returned by #1</li>
<li>Please note that S3 expects the files to be uploaded as a PUT request. <a href="http://docs.aws.amazon.com/AmazonS3/latest/dev/PresignedUrlUploadObject.html">read more</a></li>
</ol>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST https://api.sfox.com/v1/upload/sign</code></p>

<h1 id="payment-methods">Payment Methods</h1>

<h2 id="add-payment-method">Add Payment Method</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://api.sfox.com/v2/account/&lt;account id&gt;/paymentmethod"</span> <span class="se">\</span>
  -H <span class="s2">"X-SFOX-PARTNER-ID: &lt;partner id&gt;"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer &lt;account token&gt;:"</span> <span class="se">\</span>
  -H <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  -d <span class="s1">'{
    "type": "ach",
    "ach": {
    "currency": "usd",
        "routing_number": "0123456789",
        "account_number": "0001112345667",
        "name1": "john doe",
        "name2": "jane doe",
        "nickname": "checking 1"
    }
}'</span>
</code></pre>

<blockquote>
<p>The above api will return the payment id and status:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"payment_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"payment123"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pending"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This api is used to add a payment method to the account.  Currently, this api only supports &ldquo;ach&rdquo; as a payment type.  </p>

<h3 id="payment-status">Payment Status</h3>

<table><thead>
<tr>
<th>Statys</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>pending</td>
<td>payment method requires verification. use the <a href="#verify-payment-method">payment verification</a> api to finish adding the payment method</td>
</tr>
<tr>
<td>active</td>
<td>payment method is ready to be used</td>
</tr>
</tbody></table>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST https://api.sfox.com/v2/account/&lt;account id&gt;/paymentmethod</code></p>

<h2 id="verify-payment-method">Verify Payment Method</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://api.sfox.com/v2/account/&lt;account id&gt;/paymentmethod/&lt;payment method id&gt;/verify"</span> <span class="se">\</span>
  -H <span class="s2">"X-SFOX-PARTNER-ID: &lt;partner id&gt;"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer &lt;api_key&gt;"</span> <span class="se">\</span>
  -H <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  -d <span class="s1">'{
    "amount1": 0.12,
    "amount2": 0.34
}'</span>
</code></pre>

<blockquote>
<p>This api will return the payment method status:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"payment_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"payment123"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Use this api for payment methods that are in the &ldquo;pending&rdquo; state.  These payment methods, like ACH account, require the user to enter the 2 amounts that will be sent to their account.  When the amounts match, the payment method will be activated</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST https://api.sfox.com/v2/account/&lt;account id&gt;/paymentmethod/&lt;payment method id&gt;/verify</code></p>

<h2 id="get-payment-methods">Get Payment Methods</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://api.sfox.com/v2/account/&lt;account id&gt;/paymentmethod"</span>
  -H <span class="s2">"X-SFOX-PARTNER-ID: &lt;partner id&gt;"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer &lt;api_key&gt;"</span> <span class="se">\</span>
  -H <span class="s2">"Content-type: application/json"</span>
</code></pre>

<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ach"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"routing_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"**89"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"account_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"**67"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"nickname"</span><span class="p">:</span><span class="w"> </span><span class="s2">"checking 1"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"usd"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>

<p>Returns a list of payment methods on the account</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST https://api.sfox.com/v2/partner/&lt;partner id&gt;/account/&lt;account id&gt;/paymentmethod</code></p>

<h1 id="quotes">Quotes</h1>

<h2 id="request-a-quote">Request a Quote</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://quotes.sfox.com/v2/partner/&lt;partner id&gt;/quote/&lt;action&gt;"</span>
  -H <span class="s2">"X-SFOX-PARTNER-ID: &lt;partner id&gt;"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer &lt;api_key&gt;"</span> <span class="se">\</span>
  -H <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  -d <span class="s1">'{
    "action": "buy",
    "base_currency": "btc",
    "quote_currency": "usd",
    "amount": "50",
    "amount_currency": "usd"
  }'</span>
</code></pre>

<blockquote>
<p>The quote returned will have the following format</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"quote_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a5098dd0-4cb2-4256-9cb5e871fbe672d1"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"quote_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3000"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"quote_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"usd"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"base_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"base_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"btc"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"ttl"</span><span class="p">:</span><span class="w"> </span><span class="mi">3000</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expires_at"</span><span class="p">:</span><span class="w"> </span><span class="p">,</span><span class="w">
    </span><span class="nt">"fee"</span><span class="p">:</span><span class="w"> </span><span class="s2">"75"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"fee_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"usd"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This api allows you to request a quote from SFOX for certain amount.  This is used for both buying/selling currencies.  The api also allows you to request
a quote in both the base and quote currencies.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET https://api.sfox.com/v2/partner/&lt;partner id&gt;/quote/&lt;action&gt;/&lt;base currency&gt;/&lt;quote currency&gt;/&lt;amount&gt;/&lt;amount currency&gt;</code></p>

<h3 id="request-parameters">Request Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>action</td>
<td>&ldquo;buy&rdquo; or &ldquo;sell&rdquo;</td>
</tr>
<tr>
<td>base currency</td>
<td>the base currency of the requested pair.  In the case of &ldquo;btcusd&rdquo;, &ldquo;btc&rdquo; is the base currency</td>
</tr>
<tr>
<td>quote currency</td>
<td>the quote currency of the requested pair.  In the case of &ldquo;btcusd&rdquo;, &ldquo;usd&rdquo; is the quote currency</td>
</tr>
<tr>
<td>amount</td>
<td>the amount requested</td>
</tr>
<tr>
<td>amount currency</td>
<td>the currency of the amount requested</td>
</tr>
</tbody></table>

<h3 id="examples">Examples</h3>

<h4 id="a-quote-to-buy-20-worth-of-bitcoins">A quote to buy $20 worth of bitcoins</h4>

<p><code class="prettyprint">GET https://api.sfox.com/v2/partner/sfox/quote/buy/btc/usd/20/usd</code></p>

<h4 id="a-quote-to-buy-2-bitcoins">A quote to buy 2 bitcoins</h4>

<p><code class="prettyprint">GET https://api.sfox.com/v2/partner/sfox/quote/buy/btc/usd/2/btc</code></p>

<h4 id="a-quote-to-sell-2-12345678-bitcoins">A quote to sell 2.12345678 bitcoins</h4>

<p><code class="prettyprint">GET https://api.sfox.com/v2/partner/sfox/quote/sell/btc/usd/2.12345678/btc</code></p>

<h2 id="get-transaction-details">Get Transaction Details</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://api.sfox.com/v2/partner/&lt;partner id&gt;/&lt;account id&gt;/transaction/&lt;transaction id&gt;"</span>
  -H <span class="s2">"X-SFOX-PARTNER-ID: &lt;partner id&gt;"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer &lt;api_key&gt;"</span> <span class="se">\</span>
  -H <span class="s2">"Content-type: application/json"</span>
</code></pre>

<blockquote>
<p>The result will be</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"transaction_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"transaction123"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"amount_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"usd"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pending"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Use this api to get the status of a previously initiated transaction.  </p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET https://api.sfox.com/v2/partner/&lt;partner id&gt;/&lt;account id&gt;/transaction/&lt;transaction id&gt;</code></p>

<h3 id="response-fields">Response Fields</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transaction_id</td>
<td>same as the provided transaction_id</td>
</tr>
<tr>
<td>amount</td>
<td>the amount of the transaction</td>
</tr>
<tr>
<td>amount_currency</td>
<td>the currency of the amount specified</td>
</tr>
<tr>
<td>status</td>
<td>one of: <code class="prettyprint">pending</code>, <code class="prettyprint">failed</code>, <code class="prettyprint">rejected</code>, <code class="prettyprint">ready</code>, <code class="prettyprint">completed</code></td>
</tr>
</tbody></table>

<h2 id="initiate-buy">Initiate Buy</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://api.sfox.com/v2/partner/&lt;partner id&gt;/&lt;account id&gt;/transaction"</span>
  -H <span class="s2">"X-SFOX-PARTNER-ID: &lt;partner id&gt;"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer &lt;api_key&gt;"</span> <span class="se">\</span>
  -H <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  -d <span class="s1">'{
    "action": "buy",
    "destination": {
      "type": "address",
      "address": "1EyTupDgqm5ETjwTn29QPWCkmTCoEv1WbT"
    },
    "amount": "100",
    "amount_currency": "usd",
    "payment_method_id": "payment123"
  }'</span>
</code></pre>

<blockquote>
<p>The result will be</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"transaction_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"transaction123"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pending"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This api call will initiate the buy transaction by withdrawing <code class="prettyprint">amount</code> from the payment source specified.  Once the funds are available,
the partner needs to call the <a href="#confirm-buy">confirm buy</a> api to complete the purchase.  </p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST https://api.sfox.com/v2/partner/&lt;partner id&gt;/&lt;account id&gt;/transaction</code></p>

<h3 id="request-parameters">Request Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>destination.type</td>
<td>the type of destination to receive the funds. For a buy order this is always <code class="prettyprint">payment_method</code></td>
</tr>
<tr>
<td>destination.address</td>
<td>the bitcoin address to send the purchased bitcoins to</td>
</tr>
<tr>
<td>payment_method_id</td>
<td>the funding source for the transaction (if this is a buy transaction)</td>
</tr>
<tr>
<td>amount_currency</td>
<td>the name of the fiat currency the user wishes to use</td>
</tr>
<tr>
<td>amount</td>
<td>the amount that&rsquo;ll be used for the purchase transaction</td>
</tr>
</tbody></table>

<h2 id="confirm-buy">Confirm Buy</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://api.sfox.com/v2/partner/&lt;partner id&gt;/&lt;account id&gt;/transaction/&lt;transaction id&gt;"</span>
  -H <span class="s2">"X-SFOX-PARTNER-ID: &lt;partner id&gt;"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer &lt;api_key&gt;"</span> <span class="se">\</span>
  -H <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  -X PATCH <span class="se">\</span>
  -d <span class="s1">'{
    "quote_id": "b3d7ce70-4d91-11e6-bfc6-14109fd9ceb9",
    "transaction_id": "transaction123"
  }'</span>
</code></pre>

<blockquote>
<p>The quote returned will have the following format</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"transaction_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d0acf552-4d91-11e6-82df-14109fd9ceb9"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"completed"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Once the transaction is ready, the user must accept a quote and confirm the transaction with the provided <code class="prettyprint">quote_id</code>.  Both the amount
specified in the quote and the transaction must match, otherwise the transaction will not confirm.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">PATCH https://api.sfox.com/v2/partner/&lt;partner id&gt;/&lt;account id&gt;/transaction/&lt;transaction id&gt;</code></p>

<h2 id="initiate-sell">Initiate Sell</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://api.sfox.com/v2/partner/&lt;partner id&gt;/&lt;account id&gt;/transaction"</span>
  -H <span class="s2">"X-SFOX-PARTNER-ID: &lt;partner id&gt;"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer &lt;api_key&gt;"</span> <span class="se">\</span>
  -H <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  -d <span class="s1">'{
    "action": "sell",
    "destination": {
      "type": "payment_method",
      "payment_method_id": "payment123"
    },
    "currency": "btc"
  }'</span>
</code></pre>

<blockquote>
<p>The result will be</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"transaction_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"transaction123"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3EyTupDgqm5ETjwTn29QPWCkmTCoEv1WbT"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pending"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This api call will initiate the sell transaction by providing a deposit address for the user to transfer bitcoins to.  Once the funds are available,
and confirmed, the partner needs to call the <a href="#confirm-sell">confirm sell</a> api to complete the sell transaction.  </p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST https://api.sfox.com/v2/partner/&lt;partner id&gt;/&lt;account id&gt;/transaction/&lt;transaction id&gt;</code></p>

<h3 id="request-parameters">Request Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>action</td>
<td>this is always <code class="prettyprint">sell</code></td>
</tr>
<tr>
<td>destination.type</td>
<td>the type of destination to receive the funds. One of: payment_method, or address</td>
</tr>
<tr>
<td>destination.payment_method_id</td>
<td>the payment method id to receive the funds from a bitcoin sale</td>
</tr>
<tr>
<td>currency</td>
<td>the crypto-currency the user is selling</td>
</tr>
</tbody></table>

<h2 id="confirm-sell">Confirm Sell</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://api.sfox.com/v2/partner/&lt;partner id&gt;/&lt;account id&gt;/transaction/&lt;transaction id&gt;"</span>
  -H <span class="s2">"X-SFOX-PARTNER-ID: &lt;partner id&gt;"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer &lt;api_key&gt;"</span> <span class="se">\</span>
  -H <span class="s2">"Content-type: application/json"</span> <span class="se">\</span>
  -X PATCH <span class="se">\</span>
  -d <span class="s1">'{
    "quote_id": "b3d7ce70-4d91-11e6-bfc6-14109fd9ceb9",
    "transaction_id": "transaction123"
  }'</span>
</code></pre>

<blockquote>
<p>The quote returned will have the following format</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"transaction_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d0acf552-4d91-11e6-82df-14109fd9ceb9"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"completed"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>action</td>
<td>this is <code class="prettyprint">sell</code></td>
</tr>
<tr>
<td>quote_id</td>
<td>the id of the quote to be used to complete the sell transaction.  The amount of the quote must match that of the transaction otherwise this will fail</td>
</tr>
<tr>
<td>transaction_id</td>
<td>the transaction which we are confirming</td>
</tr>
</tbody></table>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">PATCH https://api.sfox.com/v2/partner/&lt;partner id&gt;/&lt;account id&gt;/transaction/&lt;transaction id&gt;</code></p>

          <h1 id="errors">Errors</h1>

<aside class="notice">The SFOX API communicates error codes through HTTP status codes.  The following are the error codes currently in use.</aside>

<p>The SFOX API uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request &ndash; Your request was malformed in some way</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized &ndash; Your API key is wrong</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden &ndash; The API key is not authorized for this endpoint</td>
</tr>
<tr>
<td>404</td>
<td>Not Found &ndash; The specified endpoint could not be found</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed &ndash; You tried to access a endpoint with an invalid method</td>
</tr>
<tr>
<td>406</td>
<td>Not Acceptable &ndash; You requested a format that isn&rsquo;t json</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests &ndash; You have exceeded your request limit</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error &ndash; We had a problem with our server. Try again later.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable &ndash; We&rsquo;re temporarially offline for maintanance. Please try again later.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
          </div>
      </div>
    </div>
  </body>
</html>
